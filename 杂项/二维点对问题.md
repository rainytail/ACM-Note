二维点对问题：求解满足某些性质的点对 (i, j) 的数量。
一般二维点对问题会有多次查询。

## 离线 + 树状数组
适用于**每个点对互相独立**的情况。
https://codeforces.com/problemset/problem/301/D
对于所有的查询，按照 $r$ 值排序，对于第 $i$ 次查询，树状数组中插入了 $1 \sim r$ 的所有点信息。
在枚举点 $j$ 时，我们找出所有在前面出现过且满足 $(i, j)$ 性质的 $i$ 点，**把(i, j)** 的贡献累计到 $i$ 头上。
对于当前询问 $(l, r)$ ，由于树状数组中只保存了 $1 \sim r$ 的点信息，那么 $query(l, r)$ 即为贡献数量。
$query(l, r)$ 枚举了产生贡献的在 $(l, r)$ 范围内的 $i$ 点，因为对应的 $j$ 点一定也在 $(l, r)$ 且 $i \le j$ ，所以求出来的是正解。

## 线段树
对于这一道题： https://codeforces.com/problemset/problem/380/C
问 $(l, r)$ 范围内最长的子序列的长度，使得其满足括号序。
我们把 $'('$ 和 $')'$ 看作两类点，就是找出符合条件的对数。
注意此时**每个点对之间会互相影响**，不能使用树状数组来做。
对于一个区间 $(l, r)$ ，一对符合条件的 $“()”$ ，有以下情况：
1. $'('$ 和 $')'$ 都在 $(l, mid)$
2. $'('$ 和 $')'$ 都在 $(mid+1, r)$ 
3. $'('$ 在 $(l, mid)$ ，$')'$ 在 $(mid+1, r)$
对于前两种情况，可以递归处理；对于第三种情况，其实就是 $min(L.left, R.right)$ 。
注意在左右区间使用的括号不能在第三种情况下继续使用。

## CDQ 分治
CDQ分治可以解决多维点对的问题。
算法基于递归处理，流程和归并排序一样：
1. 处理左区间的贡献
2. 处理右区间的贡献
3. 处理一个点在左区间、一个点在右区间的贡献。